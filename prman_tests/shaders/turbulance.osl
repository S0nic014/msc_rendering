shader turbulance (
    color Cin=1,
    output float mag=0,
    output color Cout=1
)
{
    float i;
    float freq=1;
    for (i=0; i<6; i++)
    {
        mag+=abs((float)noise("perlin", u*freq, v)) / freq;
        freq*=2.1;
    }
    Cout=mag;
    mag=smoothstep(0.1, 0.8, mag);
}